# 智能校园助手 - 项目使用说明

## 📱 项目简介

智能校园助手是一个基于鸿蒙 HarmonyOS (API 20) 开发的 AI 聊天应用，集成了百炼 Agent API，为用户提供智能问答服务。

## 🎯 主要功能

- ✅ **用户登录**：支持密码登录和短信验证码登录
- ✅ **AI 对话**：支持流式和非流式输出模式
- ✅ **历史会话**：查看历史对话记录，支持删除会话
- ✅ **简约设计**：蓝色主题，界面简洁清爽

## 📂 项目结构

```
entry/src/main/ets/
├── pages/              # 页面
│   ├── Index.ets       # 启动页（检查登录状态）
│   ├── LoginPage.ets   # 登录页
│   ├── ChatPage.ets    # 聊天页
│   └── HistoryPage.ets # 历史会话页
├── models/             # 数据模型
│   ├── User.ets
│   ├── Session.ets
│   └── Message.ets
├── services/           # 服务层
│   ├── AuthService.ets
│   ├── ChatService.ets
│   └── SessionService.ets
├── utils/              # 工具类
│   ├── HttpUtil.ets
│   └── StorageUtil.ets
└── constants/          # 常量配置
    └── ApiConstants.ets
```

## 🚀 运行步骤

### 1. 环境准备

- 安装 DevEco Studio
- 配置 HarmonyOS SDK (API 20)
- 准备模拟器或真机

### 2. 后端配置

确保后端服务已启动，并可通过以下地址访问：
- **模拟器**：`http://10.0.2.2:8080`
- **真机**：修改 `ApiConstants.ets` 中的 `BASE_URL` 为实际的局域网 IP

### 3. 运行应用

1. 在 DevEco Studio 中打开项目
2. 连接模拟器或真机
3. 点击运行按钮

## 📖 使用指南

### 登录

1. 启动应用后，首次使用会进入登录页面
2. 选择登录方式：
   - **密码登录**：输入手机号和密码
   - **验证码登录**：输入手机号，点击"发送验证码"，输入收到的验证码
3. 点击"登录"按钮

### 聊天

1. 登录成功后自动进入聊天页面
2. 在底部输入框输入问题
3. 可以切换"流式输出"开关：
   - **开启**：AI 回复会逐字显示（推荐）
   - **关闭**：AI 回复一次性显示
4. 点击"发送"按钮发送消息

### 历史会话

1. 在聊天页面点击右上角"历史会话"按钮
2. 查看所有历史会话列表
3. 点击某个会话可以继续对话
4. 左滑会话可以删除

## 🎨 设计特点

- **主色调**：蓝色 (#1E90FF)
- **布局风格**：简约、清爽
- **交互体验**：流畅的动画效果
- **响应式设计**：适配不同屏幕尺寸

## 🔧 技术栈

- **开发语言**：ArkTS (TypeScript)
- **UI 框架**：ArkUI
- **网络请求**：@kit.NetworkKit
- **本地存储**：@kit.ArkData (Preferences)
- **后端 API**：百炼 Agent

## ⚠️ 注意事项

1. **网络权限**：已在 `app.json5` 中配置 `ohos.permission.INTERNET` 权限
2. **后端地址**：模拟器使用 `10.0.2.2`，真机需要修改为实际 IP
3. **SSE 流式**：流式输出使用 Server-Sent Events (SSE) 技术
4. **Token 存储**：登录 Token 保存在本地，重启应用自动登录

## 🐛 常见问题

### 1. 无法连接后端

- 检查后端服务是否启动
- 检查网络权限是否配置
- 真机测试时确认手机和后端在同一局域网

### 2. 验证码收不到

- 检查后端短信服务配置
- 确认手机号格式正确

### 3. 流式输出不显示

- 检查后端 SSE 接口是否正常
- 查看控制台日志排查错误

## 📝 后续优化建议

- [ ] 添加消息持久化（保存到本地数据库）
- [ ] 支持多轮对话上下文
- [ ] 添加语音输入功能
- [ ] 优化 UI 动画效果
- [ ] 添加深色模式
- [ ] 支持消息复制、分享功能

## 📄 开源协议

本项目仅供学习交流使用。
